<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <link href="templets/style/style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.js"></script>
</head>
<body>
        <?php include(DEDEMEMBER."/templets/header.htm"); ?>
    <main>
        <?php include(DEDEMEMBER."/templets/login2.htm"); ?>
    </main>
        <?php include(DEDEMEMBER."/templets/footer.htm"); ?>

</body>
<script type="text/javascript">
<<<<<<< HEAD

    $('#loginbox .box-header >div ').click(function (e) {
        var $cur = $(this);
        var idx = $cur.index();
        $cur.siblings().removeClass('active');
        $cur.addClass('active');
        $cur.parents('#loginbox').find('form').removeClass('show');
        $cur.parents('#loginbox').find('form').eq(idx).addClass('show');
    })
        /* check1();
        check2(); */
        function check1() {
            let a, b, c, e = 0;           
            let $telnumb = $(".signup #telphone")
            let $password = $(".signup #pwd")
           
            //判断手机号
            $telnumb.blur(function () {
                var telnumb = /^1[34578]\d{9}$/;
                console.log($telnumb.val())
                if (!telnumb.test($telnumb.val())) {
                    $(".telnumbc").text("手机号不符合要求");
                    b = 0;
                } else {
                    $(".telnumbc").text("");
                    b = 1;
                    console.log(b)
                    e = e + b;
                    console.log(e)
                }

            })

            //判断密码是否符合格式
            $password.blur(function () {
                var password = /^[a-zA Z]\w{5,17}$/;
                console.log($password.val())
                if (!password.test($password.val())) {
                    $(".passwordc").text("密码不符合规范");
                    c = 0;
                } else {
                    $(".passwordc").text("");
                    c = 1;
                    console.log(c)
                    e = e + c;
                    console.log(e)
                }

            })
      
       
                           

        }
 
    function check2() {

         //判断身份证号码
        $username.blur(function () {
            var username = /^[\u4E00-\u9FA5A]{1,6}$/;
            console.log($username.val())
            if (!username.test($username.val())) {
                $(".namec").text("只能输入中文名");

            } else {
                $(".namec").text("");
                a = 1;
                console.log(a)
                e = e + a;
                console.log(e)
            }

        })
        $password.blur(function () {
            var password = /^[a-zA Z]\w{5,17}$/;
            console.log($password.val())
            if (!password.test($password.val())) {
                $(".passwordc").text("密码不符合规范");
                c = 0;
            } else {
                $(".passwordc").text("");
                c = 1;
                console.log(c)
                e = e + c;
                console.log(e)
            }

        })
        
    }




    //未认购登录
            $('#loginbox .button2').click(function () {
             /* 发送验证码 */
            })
            // 未认购用户
            $('#wrg .button3').click(function () {
                var sjh = $('#wrg #telnumb').val();
                var password = $("#wrg #user-password").val();
                var code = $("#code").val();
                /* console.log(sjh)
                console.log(password) */
                if (sjh != "" && password != "") {
                    $.ajax({
                        type: "post",
                        url: "yc_php/yc_wrg_login.php",
                        data: 'data'+sjh+","+password,
                        success: function (data) {
                                                                             
                            console.log(data)
                             if(data != 0 ){
                                 console.log(data !== 0)
                                 console.log(data == 0)
                                 let a = eval(data)
                                 let name = a[0]
                                 let url = a[1]   
                               /*   console.log(sjh) */                               
                                 $.cookie("name", a[0]); 
                                 $.cookie("sjh", sjh);    
                                 console.log($.cookie("name"))
                                 console.log($.cookie("sjh"))                                                                                                                                   
                                window.location.href = url;  
                            }else {
                              alert("用户名或密码不正确")    
                            }                     
                        }
                    })
                } else {
                    alert("请检查您的输入！");
                }
            })
//已认购用户
        $('#yrg .button3').click(function () {
            var userid = $('#yrg #user-id').val();
            var password = $("#yrg #password").val();
            var code = $("#code").val();
            console.log(userid)
            console.log(password)
            if (userid != "" && password != "") {
                var pp = "'" + userid + "'" + "," + "'" + password + "'";
                $.ajax({
                    type: "POST",
                    url: "yc_php/yc_yrg_login.php",
                    data: 'data' + pp,
                    success: function (data) {
                                        
                        if (data !== 0) {
                            let b = eval(data)
                            let name = b[0]
                            let url = b[1]
                            $.cookie("name", b[0]);
                            $.cookie("sfz", userid );
                                console.log($.cookie("sfz"))

                            window.location.href = url;
                        } else {
                            alert("用户名或密码不正确")
=======
       
  
    //未认购登录
            check1()           
    function check1(){
                var a,b,c,d,e= 0;                         
                let $telnumb = $("#telnumb")
                let $password =  $("#user-password")
                let $password2 =  $("#password2")
                let $id = $("#user-id")               

                function toogle(){
                    $('#loginbox .box-header >div ').click(function (e) {
                        var $cur = $(this);
                        var idx = $cur.index();
                        $cur.siblings().removeClass('active');
                        $cur.addClass('active');
                        $cur.parents('#loginbox').find('form').removeClass('show');
                        $cur.parents('#loginbox').find('form').eq(idx).addClass('show');
                        $(".button2").removeClass("abled")
                        $(".button2").addClass("disabled")
                    })
                    a,b,c,d = 0;                 
                    
                }
                toogle();

                //手机号验证及提示
                $telnumb.blur(function () {
                    var telnumb = /^1[34578]\d{9}$/;                   
                    if (!telnumb.test($telnumb.val())) {
                        $(".telnumbc").text("输入11位手机号");
                       a = 0
                    } else {
                        $(".telnumbc").text("");
                            a = 1;
                            
                                               
                    }

                 })
                 //身份证验证
                
                //密码验证
                $password.blur(function () {
                    var password = /^[a-zA Z]\w{5,17}$/;                    
                    if (!password.test($password.val())) {
                        $(".passwordc").text("密码不符合规范");
                        b = 0;
                    } else {
                        $(".passwordc").text("");
                        b = 1;       
                        if (a == 1 && b == 1 ){
                             e=1   
                             send(e);                                                
                            
                        }            
                        
                       

                    }
                })    
                $id.blur(function () {
                    var id = /^1[34578]\d{9}$/;                   
                    if (!id.test($id.val())) {
                        $(".idc").text("输入18位身份证号");
                        c = 0
                    } else {
                        $(".idc").text("");
                        c = 1;
                      
                                                 
                    }

                 })       
                $password2.blur(function () {
                    var password = /^[a-zA Z]\w{5,17}$/;                    
                    if (!password.test($password.val())) {
                        $(".passwordc2").text("密码不符合规范");
                        d = 0
                        
                    } else {
                        $(".passwordc2").text("");
                        d = 1;                   
                       
                        if (c == 1 && d == 1 ){
                             e=2   
                             send(e);                                                       
                            
                        }            
                        
                       

                    }         
              
                })
                
                
               

}

    
    
 function send(x){
        var ordertime=15   //设置再次发送验证码等待时间
        var timeleft=ordertime 
        var vcode;
        $(".button2").removeClass("disabled")
        $(".button2").addClass("abled")
        function timeCount(){
            timeleft-=1            
            if (timeleft>0){
                $(".button2").text(timeleft+" 秒后重发");
            setTimeout(timeCount,1000)
            }
            else {
                
                timeleft=ordertime   //重置等待时间
                //60s之后自动变回可点击状态
                    $(".button2").text("重新发送");
                    $(".button2").removeClass("disabled")
                    $(".button2").addClass("abled")
                
                

            }
        }                   
        
        //点击发送ajax button2 变成不可点击状态  
        $(".abled").click(function () {
            $(".button2").removeClass("abled")
            $(".button2").addClass("disabled")                       
            timeCount(this);                           
            //ajax
            vcode = "1234"
        })
        //bulr事件 验证返回或者输入 

        $("#vdcode").blur(function () {
            console.log($("#vdcode").val())
            if ($("#vdcode").val() !== vcode) {
                $(".vcodec").text("请输入正确的验证码");
            } else {
                $(".vcodec").text("");
                if(x==1){
                    wrg() 
                }else if(x==2){
                    yrg()
                }
                                                
                
        }


        
        
    })

 }




          
            
     function wrg(){
        $('#wrg .button3').click(function () {
            var sjh = $('#wrg #telnumb').val();
            var password = $("#wrg #user-password").val();
            var code = $("#code").val();
            /* console.log(sjh)
            console.log(password) */
            if (sjh != "" && password != "") {
                $.ajax({
                    type: "post",
                    url: "yc_php/yc_wrg_login.php",
                    data: 'data'+sjh+","+password,
                    success: function (data) {                                                 
                            console.log(data)

                        if(data !== 0){
                            let a = eval(data)
                            let name = a[0]
                            let url = a[1]   
                        /*   console.log(sjh) */                               
                            $.cookie("name", a[0]); 
                            $.cookie("sjh", sjh);    
                            // console.log($.cookie("name"))
                            // console.log($.cookie("sjh"))                                                                                                                                   
                            window.location.href = url;  
                        }else{
                        alert("用户名或密码不正确")    
                        }                     
                    }
                })
            } else {
                alert("请检查您的输入！");
            }
        })    

     }

    

     function yrg(){
         //已认购用户
         $('#yrg .button3').click(function () {
                var userid = $('#yrg #user-id').val();
                var password = $("#yrg #password").val();
                var code = $("#code").val();
                console.log(userid)
                console.log(password)
                if (userid != "" && password != "") {
                    var pp = "'" + userid + "'" + "," + "'" + password + "'";
                    $.ajax({
                        type: "POST",
                        url: "yc_php/yc_yrg_login.php",
                        data: 'data' + pp,
                        success: function (data) {
                                         
                            if (data !== 0) {
                                let b = eval(data)
                                let name = b[0]
                                let url = b[1]
                                $.cookie("name", b[0]);
                                $.cookie("sfz", userid );
                                //  console.log($.cookie("sfz"))

                                window.location.href = url;
                            } else {
                                alert("用户名或密码不正确")
                            }
>>>>>>> 237a98bedc55e9dde98b665bcaf2e208c6f7aca7
                        }
                    }
                })
            } else {
                alert("请检查您的输入！");
            }
        })











     }
 
         
</script>
</html>





