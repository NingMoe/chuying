<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link href="templets/style/style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
</head>



<body>
    <?php include(DEDEMEMBER."/templets/header.htm"); ?>
    <main>
        <?php include(DEDEMEMBER."/templets/signup.htm"); ?>
    </main>
    <?php include(DEDEMEMBER."/templets/footer.htm"); ?>

</body>
<script type="text/javascript">

    $('#loginbox .box-header >div ').click(function (e) {
        var $cur = $(this);
        var idx = $cur.index();
        $cur.siblings().removeClass('active');
        $cur.addClass('active');
        $cur.parents('#loginbox').find('form').removeClass('show');
        $cur.parents('#loginbox').find('form').eq(idx).addClass('show');
    })




</script>
<script>
    //注册

    //监听输入失焦
        check ();
        function check (){
             var a,b,c,d,e = 0;
             let $username = $('.signup #username')
             let $telnumb = $(".signup #telphone")
             let $password =  $(".signup #pwd")
             let $passworddok = $(".signup #userpwdok")
             

            //判断用户名
            $username.blur(function(){
                var username = /^[\u4E00-\u9FA5A-Za-z]+$/;
                console.log($username.val())
                if (!username.test($username.val())) {
                    $(".namec").text("只能输入中文名");
                   
                } else {
                    $(".namec").text("");
                    a = 1;
                    console.log(a)
                    e = e + a;
                    console.log(e)
                }              

            })
             //判断手机号
            $telnumb.blur(function () {
                var telnumb = /^[\u4E00-\u9FA5A-Za-z]+$/;
                console.log($telnumb.val())
                if (!telnumb.test($username.val())) {
                    $(".telnumbc").text("手机号不符合位数");
                    b = 0;
                } else {
                    $(".telnumbc").text("");
                    b = 1;
                    console.log(b)
                    e = e + b;
                    console.log(e)
                }

            })
                    
            //判断密码是否符合格式
            $password.blur(function () {
                var password = /^[\u4E00-\u9FA5A-Za-z]+$/;
                console.log($password.val())
                if (!password.test($password.val())) {
                    $(".passwordc").text("密码不符合规范");
                    c = 0;
                } else {
                    $(".passwordc").text("");
                    c = 1;
                     console.log(c)
                     e = e + c;
                     console.log(e)
                }

            })

            //判断密码是否一致
            $passworddok.blur(function () {
                 console.log($passworddok.val())
                if ($password.val() !== $passworddok.val()) {
                    $(".pwdck").text("密码不一致");
                    d = 0;                    
                } else {
                    $(".pwdck").text("");
                    d = 1;
                    console.log(d)
                    e = e + d;
                    console.log(e)
                        if (e == 4) {
                            $('.signup #signup-button').click(function () {
                                var username = $('.signup #username').val();
                                var password = $(".signup #pwd").val();
                                let telnumb = $(".signup #telphone").val();
                                var pp = "'" + username + "'" + "," + "'" + password + "'" + "," + "'" + telnumb + "'";
                                $.ajax({
                                    type: "POST",
                                    url: "yc_php/yc_register.php",
                                    data: 'data' + pp,
                                    success: function (data) {
                                        if (data == 1) {
                                            console.log("开始跳转")
                                            window.location.href = "index1.php";
                                        } else {
                                            alert("注册失败")
                                        }

                                    }

                                })
                            })
                        } 
                    }

            })
            //判断checkbox


            //如果都ok，才发ajax
            //点击提交监听
            console.log(e)
            

        }
        /* $('.signup #signup-button').click(function () {
            var username = $('.signup #username').val();
            var password = $(".signup #pwd").val();
            let telnumb = $(".signup #telphone").val();
            var passworddok = $(".signup #userpwdok").val();
            var code = $("#code").val();   

            if (username != "" && password != "") {
                
                if (password === passworddok) {
                    var pp = "'" + username + "'" + "," + "'" + password + "'" + "," + "'" + telnumb + "'";
                    $.ajax({
                        type: "POST",
                        url: "yc_php/yc_register.php",
                        data: 'data' + pp,
                        success: function (data) {
                            if (data == 1) {
                                console.log("开始跳转")
                                window.location.href = "index1.php";
                            } else {
                                alert("注册失败")
                            }

                        }
                    })
                } else {
                $(".pswc").text("两次密码输入不一致");
                }

            } else {
                alert("请检查您的输入！");
            }
        })
    */

    
</script>


</html>